import{r as c,a4 as _,a5 as g}from"./vendor.170688b3.js";import{r as i}from"./base.63059160.js";import{s as o}from"./index.dc65f411.js";function d(){const e=c(-1),s=_(()=>e.value<0?"\u83B7\u53D6\u9A8C\u8BC1\u7801":`${e.value} s`);return g(e,t=>{t!==-1&&setTimeout(()=>{e.value--},1e3)}),{cutDown:e,codeMessage:s}}function l(e){return typeof e!="string"?!1:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)}function E(e){return typeof e!="string"?!1:/^\d{6}$/.test(e)}async function p(e){return new Promise(async s=>{const{success:t,content:r,message:n}=await i.get({url:`/register/getQQVerification/${e}`});window.$message[t?"success":"error"](n),s(r)})}async function C(e){if(o.get("__CURRENT_CODE_CD__"))throw window.$message.warning("\u53D1\u9001\u9A8C\u8BC1\u7801\u8FC7\u4E8E\u9891\u7E41 ~"),new Error;return new Promise(async s=>{const{success:t,content:r,message:n}=await i.get({url:`/login/getVerification/${e}`});t&&o.set("__CURRENT_CODE_CD__","60_sec",60*1e3),window.$message[t?"success":"error"](n),s(r)})}async function y(e,s,t){return new Promise(async r=>{const{success:n,message:a}=await i.post({url:"register",data:{email:e,emailToken:s,emailVerification:t}});window.$message[n?"success":"error"](a),r(n)})}async function $(e,s,t){return new Promise(async r=>{const{success:n,message:a,content:u}=await i.post({url:"/login/byEmail",data:{email:e,emailToken:s,emailVerification:t}});n&&(o.set("__USER_LOGIN_TOKEN__",u.token,3600*1e3*24*7),o.set("__USER_LOGIN_ID__",u.id,3600*1e3*24*7)),window.$message[n?"success":"error"](a),r(n)})}async function D(e,s){return new Promise(async t=>{const{success:r,message:n,content:a}=await i.post({url:"/login/byPassword",data:{email:e,password:s}});r&&(o.set("__USER_LOGIN_TOKEN__",a.token,3600*1e3*24*7),o.set("__USER_LOGIN_ID__",a.id,3600*1e3*24*7)),window.$message[r?"success":"error"](n),t(r)})}export{$ as a,E as b,p as c,y as d,l as e,C as g,D as p,d as u};
