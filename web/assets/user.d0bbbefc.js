import{r as u,a4 as _,a5 as g}from"./vendor.81235092.js";import{r as c}from"./base.efe1ff67.js";import{s as a}from"./index.1e91d38a.js";function f(){const s=u(-1),n=_(()=>s.value<0?"\u83B7\u53D6\u9A8C\u8BC1\u7801":`${s.value} s`);return g(s,e=>{e!==-1&&setTimeout(()=>{s.value--},1e3)}),{cutDown:s,codeMessage:n}}async function E(s){return new Promise(async n=>{const{success:e,content:o,message:t}=await c.get({url:`/register/getQQVerification/${s}`});window.$message[e?"success":"error"](t),n(o)})}async function l(s){if(a.get("__CURRENT_CODE_CD__"))throw window.$message.warning("\u53D1\u9001\u9A8C\u8BC1\u7801\u8FC7\u4E8E\u9891\u7E41 ~"),new Error;return new Promise(async n=>{const{success:e,content:o,message:t}=await c.get({url:`/login/getVerification/${s}`});e&&a.set("__CURRENT_CODE_CD__","60_sec",60*1e3),window.$message[e?"success":"error"](t),n(o)})}async function C(s,n,e){return new Promise(async o=>{const{success:t,message:r}=await c.post({url:"register",data:{email:s,emailToken:n,emailVerification:e}});window.$message[t?"success":"error"](r),o(t)})}async function p(s,n,e){return new Promise(async o=>{const{success:t,message:r,content:i}=await c.post({url:"/login/byEmail",data:{email:s,emailToken:n,emailVerification:e}});t&&(a.set("__USER_LOGIN_TOKEN__",i.token,3600*1e3*24*7),a.set("__USER_LOGIN_ID__",i.id,3600*1e3*24*7)),window.$message[t?"success":"error"](r),o(t)})}async function y(s,n){return new Promise(async e=>{const{success:o,message:t,content:r}=await c.post({url:"/login/byPassword",data:{email:s,password:n}});o&&(a.set("__USER_LOGIN_TOKEN__",r.token,3600*1e3*24*7),a.set("__USER_LOGIN_ID__",r.id,3600*1e3*24*7)),window.$message[o?"success":"error"](t),e(o)})}export{p as a,E as b,C as c,l as g,y as p,f as u};
