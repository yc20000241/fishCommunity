import{r as i,u as A,e as H,c as b,o as k,f as I,g as _,h as u,k as e,w as o,T,U as F,N as y,W as S,X as w,j as E,Y as O,Z as N,t as V,_ as x,$ as P}from"./vendor.e2990882.js";import{_ as R}from"./CpnBlockCard.10c6ed92.js";import{u as W}from"./useCutDown.e2b142a0.js";import{u as K,g as U,p as $,a as j,_ as G}from"./index.dbe1cbcb.js";import{e as X,a as Y}from"./valid.f10c45cb.js";import{h as Z}from"./encrypt.1811bbaa.js";import"./BaseTitle.7b69d1b1.js";function q(L){const d=K(),n=i(!1),t=i(!1),c=A(),l=H(),s=i(""),r=i(""),p=i(""),g=i("");function f(){return X(s.value)?!0:(l.error("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u90AE\u7BB1"),!1)}async function m(){if(f()){const{emailToken:a}=await U(s.value);g.value=a,L.value=60}}function h(){return Y(r.value)?!0:(l.error("\u9A8C\u8BC1\u7801\u9700\u4E3A\u516D\u4F4D\u6570\u5B57"),!1)}function v(a){s.value=a}function M(a){r.value=a}function C(a){p.value=a}function B(){n.value=!n.value}async function D(){if(f()&&(n.value||h())){t.value=!0;let a=!0;if(n.value?a=await $(s.value,Z(p.value)):a=await j(s.value,g.value,r.value),t.value=!1,a)return d.changeLoginState(!0),l.success("\u6B22\u8FCE\u56DE\u6765 \u{1F600}~"),c.push("./home")}}return{loginMethod:n,loginLoading:t,sendCodeMessage:m,emailValueChangeHandle:v,emailCodeValueChangeHandle:M,passwordValueChangeHandle:C,sendLoginhandle:D,changeLoginMethod:B}}const z=["onClick"],J={class:"login-main"},Q={class:"main-inner"},ee=N("\u767B\u5F55"),ae=b({setup(L){const d=A(),{codeMessage:n,cutDown:t}=W(),{loginLoading:c,loginMethod:l,sendCodeMessage:s,emailValueChangeHandle:r,emailCodeValueChangeHandle:p,passwordValueChangeHandle:g,sendLoginhandle:f,changeLoginMethod:m}=q(t);function h(){d.push("/home")}function v(){d.push("/register")}return(M,C)=>(k(),I("div",{class:"login",onClick:T(h,["self"])},[_("div",J,[u(e(R),{title:"\u8BF7\u5148\u5B8C\u6210\u767B\u5F55 \u{1F61B}"},{default:o(()=>[_("div",Q,[u(e(w),null,{default:o(()=>[u(e(F),{placeholder:"\u8F93\u5165\u60A8\u7684\u90AE\u7BB1","on-update:value":e(r)},{prefix:o(()=>[u(e(y),{component:e(S)},null,8,["component"])]),_:1},8,["on-update:value"])]),_:1}),e(l)?(k(),E(e(w),{key:1},{default:o(()=>[u(e(F),{placeholder:"\u5BC6\u7801",type:"password","on-update:value":e(g)},{prefix:o(()=>[u(e(y),{component:e(P)},null,8,["component"])]),_:1},8,["on-update:value"])]),_:1})):(k(),E(e(w),{key:0},{default:o(()=>[u(e(F),{placeholder:"\u9A8C\u8BC1\u7801","on-update:value":e(p)},{prefix:o(()=>[u(e(y),{component:e(O)},null,8,["component"])]),_:1},8,["on-update:value"]),u(e(x),{type:"primary",strong:"",disabled:e(t)>-1,onClick:e(s)},{default:o(()=>[N(V(e(n)),1)]),_:1},8,["disabled","onClick"])]),_:1})),_("div",{class:"register",onClick:v},"\u6CA1\u6709\u8D26\u53F7\uFF1F\u7ACB\u5373\u6CE8\u518C"),_("div",{class:"change",onClick:C[0]||(C[0]=(...B)=>e(m)&&e(m)(...B))},V(e(l)?"\u5207\u6362\u9A8C\u8BC1\u7801\u767B\u5F55":"\u5207\u6362\u5BC6\u7801\u767B\u5F55"),1),u(e(x),{type:"primary",strong:"",loading:e(c),disabled:e(c),onClick:e(f)},{default:o(()=>[ee]),_:1},8,["loading","disabled","onClick"])])]),_:1})])],8,z))}});var re=G(ae,[["__scopeId","data-v-10d2cfbd"]]);export{re as default};
